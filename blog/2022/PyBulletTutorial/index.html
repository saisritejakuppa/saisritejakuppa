<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Introduction to Pybullet | Sai Sri Teja K</title> <meta name="author" content="Sai Sri Teja K"> <meta name="description" content="Pybullet tutorial, Load and View robots."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img//assets/img/logo.png"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://saisritejakuppa.github.io/blog/2022/PyBulletTutorial/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Sai Sri Teja </span>K</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Introduction to Pybullet</h1> <p class="post-meta">September 22, 2022</p> <p class="post-tags"> <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/robotics"> <i class="fas fa-hashtag fa-sm"></i> Robotics</a>     ·   <a href="/blog/category/pybullet"> <i class="fas fa-tag fa-sm"></i> Pybullet</a>   </p> </header> <article class="post-content"> <h1 id="pybullet-robots-and-cameras">Pybullet: Robots and Cameras</h1> <p>Welcome to the tutorial on using PyBullet, the physics engine for simulating rigid body dynamics. In this blog post, we will be diving into the basics of PyBullet and how to use it to simulate physics in your own projects. Whether you’re a beginner or an experienced developer, this tutorial will provide you with the knowledge and tools you need to get started with PyBullet. So, let’s get started and learn how to create realistic physics simulations with PyBullet!</p> <p align="center"> <img src="https://user-images.githubusercontent.com/70435083/215378837-13b4e1a8-f2db-4aff-96ff-e76ea7639b80.gif" alt="ultrasoundgif" class="center"> </p> <p align="center"> <a href="">UR5 robot interaction with a torid soft body.</a> </p> <p>In this blog, we will be utilizing a UR5 robot to demonstrate the capabilities of PyBullet. We will guide you through the process of loading the robot into the simulation and show you how to manipulate its movement. Additionally, we will also explore the use of cameras to view the robot from different angles, providing a more realistic representation of its motion</p> <p>URDF (Unified Robot Description Format) is a file format used to describe the physical structure and kinematics of a robot. It is an XML-based format that is used to define the robot’s links, joints, and sensors. The URDF file contains information about the robot’s geometry, mass properties, joint limits, and other parameters. It is used to define the robot’s model for physics simulation and visualization.</p> <p>URDF is widely used in robotics, it is used in popular robot simulators like Gazebo and PyBullet, as well as in many robot operating systems like ROS. URDF files can be created manually or generated from CAD models using various tools like xacro, URDF exporter from SolidWorks, Inventor, etc. The URDF file can be loaded into a robot simulator, and the robot’s model can be used for physics simulation, motion planning, and visualization.</p> <p>PyBullet, a physics simulation engine, also provides support for simulating soft-body dynamics. Soft-bodies are objects that can bend, stretch, and deform, unlike rigid bodies that maintain a fixed shape. Examples of soft-bodies include fabrics, ropes, and other flexible materials.</p> <p>In PyBullet, soft-bodies are represented using the Bullet Soft Body library. This library allows users to create and simulate soft-bodies using a variety of methods, including cloth, rope, and mesh simulations. The library also provides several parameters that can be used to control the behavior of the soft-body, such as stiffness, damping, and mass.</p> <p>The user can create a soft-body using the p.createSoftBody function. This function takes several arguments such as the shape of the soft-body, its mass, and its collision shape. After creating the soft-body, the user can apply forces and torques to it, and the library will simulate its dynamics accordingly.</p> <p>One of the main advantages of using soft-bodies in PyBullet is the ability to create realistic simulations of flexible materials such as fabrics, ropes, and other flexible materials. This can be useful in many applications such as robotics, animation, and gaming.</p> <p align="center"> <img src="https://user-images.githubusercontent.com/70435083/215378959-46fa9d30-1bc1-4625-805b-d64a319fbf57.gif" alt="ultrasoundgif" class="center"> </p> <p align="center"> <a href="">Interaction with the soft body.</a> </p> <p align="center"> <img src="https://user-images.githubusercontent.com/70435083/215380122-689f9c61-64c1-46ee-941c-426424f31743.JPG" alt="ultrasoundgif" class="center"> <br> <a href="">Close view of robot interacting with the toroid.</a> </p> <p>python code</p> <h2 id="install-the-dependencies-and-load-the-necessary-headers">Install the dependencies and load the necessary headers</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#install the dependencies and load the necessary headers
</span><span class="kn">import</span> <span class="n">pybullet</span> <span class="k">as</span> <span class="n">p</span>
<span class="kn">import</span> <span class="n">pybullet_data</span>
<span class="kn">import</span> <span class="n">time</span>

<span class="c1">#connect to the physics server
</span><span class="n">p</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">DIRECT</span><span class="p">)</span>
<span class="c1">#allow to find the assets (URDF, obj, textures etc)
</span><span class="n">p</span><span class="p">.</span><span class="nf">setAdditionalSearchPath</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="nf">getDataPath</span><span class="p">())</span>

<span class="n">p</span><span class="p">.</span><span class="nf">setGravity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>

<span class="c1">#load the ground plane
</span><span class="n">planeId</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">loadURDF</span><span class="p">(</span><span class="sh">"</span><span class="s">plane.urdf</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <h2 id="load-the-robot">Load the robot</h2> <p>startPos is a list of 3 floating-point numbers that represent the initial position of an object in 3D space. The values in the list correspond to the x, y, and z coordinates respectively. In this case, the initial position is set to the origin (0,0,0) which is the point (x,y,z) = (0,0,0) in the 3D space.</p> <p>startOrientation is a variable that holds the initial orientation of an object in the form of a quaternion. A quaternion is a 4D mathematical object that can be used to represent rotations in 3D space. In this case, startOrientation is set by calling the p.getQuaternionFromEuler function, which takes a list of 3 floating-point numbers representing the Euler angles (in radians) of the object’s initial orientation. The [0,0,0] passed as the argument corresponds to the yaw, pitch and roll of the object in that order.</p> <p>Together, startPos and startOrientation define the initial position and orientation of an object in the simulation. These values can be used to specify the initial state of an object when it is added to the simulation.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#place the robot at the base position
</span><span class="n">startPos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">startOrientation</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">getQuaternionFromEuler</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="c1">#load the robot urdf file
</span><span class="n">boxId</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">loadURDF</span><span class="p">(</span><span class="sh">"</span><span class="s">/content/pybullet-works/notebooks/meshes/ur5.urdf</span><span class="sh">"</span><span class="p">,</span><span class="n">startPos</span><span class="p">,</span> <span class="n">startOrientation</span><span class="p">)</span>
</code></pre></div></div> <h2 id="adding-camera-to-the-scence">Adding camera to the scence</h2> <p>The variables pitch, roll, and yaw define the rotation of the camera in 3D space. pitch represents the rotation around the x-axis, roll represents the rotation around the y-axis, and yaw represents the rotation around the z-axis. In this case, the pitch is set to -10 degrees, which will make the camera look slightly downwards, the roll is set to 0, and the yaw is not defined.</p> <p>upAxisIndex is an integer variable that represents the up axis of the camera. This variable is used to specify which axis of the camera is pointing upwards. In this case, the value is set to 2, which corresponds to the z-axis.</p> <p>camDistance is a variable that represents the distance of the camera from the target position. In this case, the camera is 1.5 units away from the target position.</p> <p>pixelWidth and pixelHeight define the resolution of the image captured by the camera. In this case, the image will be 640 pixels wide and 480 pixels tall.</p> <p>nearPlane and farPlane define the near and far clipping planes of the camera, respectively. Objects closer than the near plane or farther than the far plane will not be visible in the captured image. In this case, the near plane is set to 0.01 units and the far plane is set to 100 units.</p> <p>fov is the field of view of the camera, measured in degrees. In this case, the field of view is set to 60 degrees.</p> <p>viewMatrix and projectionMatrix are 4x4 matrices that define the position and configuration of the camera. viewMatrix is computed using the p.computeViewMatrixFromYawPitchRoll function, which takes several arguments such as the target position, distance, yaw, pitch, roll, and up axis index of the camera. projectionMatrix is computed using the p.computeProjectionMatrixFOV function, which takes the field of view, aspect ratio, near and far clipping planes of the camera.</p> <p>Finally, the p.getCameraImage function is used to capture an image of the simulation. This function takes several arguments such as the width, height, viewMatrix, and projectionMatrix of the camera and returns an image in the form of an array.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%%</span><span class="n">time</span>
<span class="n">camTargetPos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cameraUp</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">cameraPos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">p</span><span class="p">.</span><span class="nf">setGravity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>

<span class="kn">from</span> <span class="n">google.colab</span> <span class="kn">import</span> <span class="n">widgets</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">random</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="n">matplotlib</span> <span class="kn">import</span> <span class="n">pylab</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">widgets</span><span class="p">.</span><span class="nc">Grid</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">yaw</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">yaw</span> <span class="o">+=</span> <span class="mi">60</span>
    <span class="k">with</span> <span class="n">grid</span><span class="p">.</span><span class="nf">output_to</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
      <span class="n">grid</span><span class="p">.</span><span class="nf">clear_cell</span><span class="p">()</span>
      <span class="n">pylab</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
      <span class="n">pitch</span> <span class="o">=</span> <span class="o">-</span><span class="mf">10.0</span>
      <span class="n">roll</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">upAxisIndex</span> <span class="o">=</span> <span class="mi">2</span>
      <span class="n">camDistance</span> <span class="o">=</span> <span class="mf">1.5</span>
      <span class="n">pixelWidth</span> <span class="o">=</span> <span class="mi">640</span>
      <span class="n">pixelHeight</span> <span class="o">=</span> <span class="mi">480</span>
      <span class="n">nearPlane</span> <span class="o">=</span> <span class="mf">0.01</span>
      <span class="n">farPlane</span> <span class="o">=</span> <span class="mi">100</span>
      <span class="n">fov</span> <span class="o">=</span> <span class="mi">60</span>
      <span class="n">viewMatrix</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">computeViewMatrixFromYawPitchRoll</span><span class="p">(</span><span class="n">camTargetPos</span><span class="p">,</span> <span class="n">camDistance</span><span class="p">,</span> <span class="n">yaw</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span>
                                                                  <span class="n">roll</span><span class="p">,</span> <span class="n">upAxisIndex</span><span class="p">)</span>
      <span class="n">aspect</span> <span class="o">=</span> <span class="n">pixelWidth</span> <span class="o">/</span> <span class="n">pixelHeight</span>
      <span class="n">projectionMatrix</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">computeProjectionMatrixFOV</span><span class="p">(</span><span class="n">fov</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">nearPlane</span><span class="p">,</span> <span class="n">farPlane</span><span class="p">)</span>
          
      <span class="n">img_arr</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">getCameraImage</span><span class="p">(</span><span class="n">pixelWidth</span><span class="p">,</span><span class="n">pixelHeight</span><span class="p">,</span><span class="n">viewMatrix</span><span class="p">,</span><span class="n">projectionMatrix</span><span class="p">)</span>
      <span class="n">w</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1">#width of the image, in pixels
</span>      <span class="n">h</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1">#height of the image, in pixels
</span>      <span class="n">rgb</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1">#color data RGB
</span>      <span class="n">dep</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="c1">#depth data
</span>      <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">w=</span><span class="sh">"</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="sh">"</span><span class="s">h=</span><span class="sh">"</span><span class="p">,</span><span class="n">h</span><span class="p">)</span>
      <span class="n">np_img_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">reshape</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
      <span class="n">np_img_arr</span> <span class="o">=</span> <span class="n">np_img_arr</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="mf">255.</span><span class="p">)</span>
      <span class="n">pylab</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">np_img_arr</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="sh">'</span><span class="s">none</span><span class="sh">'</span><span class="p">,</span> <span class="n">animated</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">pybullet</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p align="center"> <img src="https://user-images.githubusercontent.com/70435083/215380119-15fcf56b-8aaa-429a-854c-b58bb810fab4.JPG" alt="ultrasoundgif" class="center"> <br> <a href="">Robot in all views.</a> </p> <h2 id="create-an-animated-png">Create an animated png</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">numpngw</span>
<span class="kn">from</span> <span class="n">numpngw</span> <span class="kn">import</span> <span class="n">write_apng</span>
<span class="kn">from</span> <span class="n">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>


<span class="n">frames</span><span class="o">=</span><span class="p">[]</span> <span class="c1">#frames to create animated png
</span><span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">60</span><span class="p">):</span>
    <span class="n">yaw</span> <span class="o">+=</span> <span class="mi">6</span>
    <span class="n">pitch</span> <span class="o">=</span> <span class="o">-</span><span class="mf">10.0</span>
    <span class="n">roll</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">upAxisIndex</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">camDistance</span> <span class="o">=</span> <span class="mf">1.5</span>
    <span class="n">pixelWidth</span> <span class="o">=</span> <span class="mi">320</span>
    <span class="n">pixelHeight</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">nearPlane</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="n">farPlane</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">fov</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">viewMatrix</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">computeViewMatrixFromYawPitchRoll</span><span class="p">(</span><span class="n">camTargetPos</span><span class="p">,</span> <span class="n">camDistance</span><span class="p">,</span> <span class="n">yaw</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span>
                                                                <span class="n">roll</span><span class="p">,</span> <span class="n">upAxisIndex</span><span class="p">)</span>
    <span class="n">aspect</span> <span class="o">=</span> <span class="n">pixelWidth</span> <span class="o">/</span> <span class="n">pixelHeight</span>
    <span class="n">projectionMatrix</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">computeProjectionMatrixFOV</span><span class="p">(</span><span class="n">fov</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">nearPlane</span><span class="p">,</span> <span class="n">farPlane</span><span class="p">)</span>
        
    <span class="n">img_arr</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nf">getCameraImage</span><span class="p">(</span><span class="n">pixelWidth</span><span class="p">,</span><span class="n">pixelHeight</span><span class="p">,</span><span class="n">viewMatrix</span><span class="p">,</span><span class="n">projectionMatrix</span><span class="p">)</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1">#width of the image, in pixels
</span>    <span class="n">h</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1">#height of the image, in pixels
</span>    <span class="n">rgb</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1">#color data RGB
</span>    <span class="n">dep</span> <span class="o">=</span> <span class="n">img_arr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="c1">#depth data
</span>    <span class="c1">#print("w=",w,"h=",h)
</span>    <span class="n">np_img_arr</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">reshape</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">np_img_arr</span><span class="p">[:,</span> <span class="p">:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">frames</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">creating animated png, please about 5 seconds</span><span class="sh">"</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="nf">write_apng</span><span class="p">(</span><span class="sh">"</span><span class="s">example6.png</span><span class="sh">"</span><span class="p">,</span> <span class="n">frames</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="o">%</span><span class="n">time</span> <span class="nc">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="sh">"</span><span class="s">example6.png</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p align="center"> <img src="https://user-images.githubusercontent.com/70435083/215378974-9468cbe5-50e2-49a3-8a74-4031634cc8f1.gif" alt="ultrasoundgif" class="center"> </p> <p align="center"> <a href="">UR5 robot interaction with a torid soft body.</a> </p> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/DisfluencyDetection/">Disfluency detection using deep learning.</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/NvidiaTools/">Nvidia Tools</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/DeepLearningDiffusion/">Deep Learning Diffusion - Code</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/NvidiaGTCDeepstream/">Solving Grand Challenges in Video Analytics</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/ECCV2024/">ECCV 2024</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2025 Sai Sri Teja K. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/saisritejakuppa/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>